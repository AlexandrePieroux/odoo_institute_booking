<odoo>
    <template id="products" name="Products">
        <t t-call="website.layout">
            <t t-set="additional_title" t-value="category.name" />
            <t t-set="grid_block_name">Grid</t>
            <t t-set="product_block_name">Service</t>

            <!-- Qweb variable defining the class suffix for navbar items.
                Change accordingly to the derired visual result (eg. `primary`, `dark`...)-->
            <t t-set="navClass" t-valuef="light" />

            <!-- Check for active options: the stored value may be used in sub-templates too  -->
            <t t-set="opt_wsale_categories"
                t-value="is_view_active('website_sale.products_categories')" />
            <t t-set="opt_wsale_categories_top"
                t-value="is_view_active('website_sale.products_categories_top')" />

            <div id="wrap" class="js_sale o_wsale_products_page">
                <div class="oe_structure oe_empty oe_structure_not_nearest"
                    id="oe_structure_website_sale_products_1" />
                <div class="container oe_website_sale pt-2">
                    <div class="row o_wsale_products_main_row align-items-start flex-nowrap">
                        <div id="products_grid"
                            t-attf-class="o_wsale_layout_list {{'col-lg-9' if hasLeftColumn else 'col-12'}}">
                            <t t-call="website_sale.products_breadcrumb">
                                <t t-set="_classes" t-valuef="d-none d-lg-flex w-100 p-0 small" />
                            </t>

                            <h1 t-if="category">
                                <t t-esc="category.name" />
                            </h1>

                            <t t-if="category">
                                <t t-set='editor_msg'> Drag building blocks here to customize the
                                    header for "<t t-esc='category.name' />" category. </t>
                                <div class="mb16"
                                    id="category_header"
                                    t-att-data-editor-message="editor_msg"
                                    t-field="category.website_description" />
                            </t>

                            <t t-if="opt_wsale_categories_top"
                                t-call="website_sale.filmstrip_categories" />

                            <div
                                class="products_header btn-toolbar flex-nowrap align-items-center justify-content-between gap-3 mb-3">
                                <div t-if="category"
                                    class="d-flex align-items-center d-lg-none me-auto">
                                    <t t-if="not category.parent_id" t-set="backUrl"
                                        t-valuef="/booking" />
                                    <t t-else="" t-set="backUrl"
                                        t-value="keep('/booking/category/' + slug(category.parent_id), category=0)" />

                                    <a t-attf-class="btn btn-{{navClass}} me-2"
                                        t-att-href="category.parent_id and keep('/booking/category/' + slug(category.parent_id), category=0) or '/booking'">
                                        <i class="fa fa-angle-left" />
                                    </a>
                                    <h4 t-out="category.name" class="mb-0 me-auto" />
                                </div>
                            </div>

                            <div t-if="products"
                                class="o_wsale_products_grid_table_wrapper pt-3 pt-lg-0">
                                <t t-set="grid_md_allow_custom_cols" t-value="hasLeftColumn" />
                                <t t-set="grid_md_use_3col"
                                    t-value="not hasLeftColumn and ppr == 4" />

                                <section
                                    id="o_wsale_products_grid"
                                    t-attf-class="o_wsale_products_grid_table grid {{grid_md_allow_custom_cols and 'o_wsale_products_grid_table_md'}}"
                                    t-attf-style="--o-wsale-products-grid-gap: {{gap}}; --o-wsale-ppr: {{ppr}}; --o-wsale-ppg: {{ppg}}"
                                    t-att-data-ppg="ppg"
                                    t-att-data-ppr="ppr"
                                    t-att-data-default-sort="website.shop_default_sort"
                                    t-att-data-name="grid_block_name"
                                >
                                    <t t-foreach="bins" t-as="tr_product">
                                        <t t-foreach="tr_product" t-as="td_product">
                                            <t t-if="td_product">
                                                <t t-set="col_height" t-value="td_product['y']" />
                                                <t t-set="col_width"
                                                    t-value="12 // ppr * td_product['x']" />
                                                <t t-set="col_class_lg"
                                                    t-value="'g-col-lg-' + str(col_width)" />
                                                <t t-set="col_class_md"
                                                    t-value="grid_md_allow_custom_cols and ('g-col-md-' + str(col_width)) or grid_md_use_3col and 'g-col-md-4' or 'g-col-md-6'" />
                                                <t t-set="col_is_stretched"
                                                    t-value="(td_product['x'] &gt;= td_product['y'] * 2)" />
                                                <t t-set="col_is_custom_portrait"
                                                    t-value="not col_is_stretched and (col_height &gt; td_product['x'])" />
                                                <div
                                                    t-attf-class="oe_product {{col_is_custom_portrait and 'oe_product_custom_portrait'}} g-col-6 {{col_class_md}} {{col_class_lg}} {{col_is_stretched and 'oe_product_size_stretch'}}"
                                                    t-attf-style="--o-wsale-products-grid-product-col-height: {{col_height}};"
                                                    t-att-data-ribbon-id="td_product['ribbon'].id"
                                                    t-att-data-colspan="td_product['x'] != 1 and td_product['x']"
                                                    t-att-data-rowspan="td_product['y'] != 1 and td_product['y']"
                                                    t-att-data-name="product_block_name"
                                                >
                                                    <div
                                                        t-attf-class="o_wsale_product_grid_wrapper position-relative h-100 o_wsale_product_grid_wrapper_#{td_product['x']}_#{td_product['y']}">
                                                        <t t-call="website_sale.products_item">
                                                            <t t-set="product"
                                                                t-value="td_product['product']" />
                                                        </t>
                                                    </div>
                                                </div>
                                            </t>
                                        </t>
                                    </t>
                                </section>
                            </div>
                            <div t-else="" class="text-center text-muted mt128 mb256">
                                <p t-ignore="true" groups="sales_team.group_sale_manager">Click <i>
                                    'New'</i> in the top-right corner to create your first product.</p>
                            </div>
                            <div class="products_pager d-flex justify-content-center pt-5 pb-3">
                                <t t-call="website.pager" />
                            </div>
                            <t t-if="category">
                                <t t-set='footer_editor_message'> Drag building blocks here to
                                    customize the footer for "<t t-esc='category.name' />" category. </t>
                                <div
                                    class="mb16"
                                    id="category_footer"
                                    t-att-data-editor-message="footer_editor_message"
                                    t-field="category.website_footer"
                                />
                            </t>
                        </div>
                    </div>

                    <t t-call="website_sale.o_wsale_offcanvas" />
                </div>
                <div class="oe_structure oe_empty oe_structure_not_nearest"
                    id="oe_structure_website_sale_products_2" />
            </div>
        </t>
    </template>
</odoo>